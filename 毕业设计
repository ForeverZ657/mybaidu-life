 基于PLC的旋转流管式膜微滤电气控制系统设计
1 引言
水作为人类耐以生存最重要的资源，但是随着社会发展人类的进步对于水资源的消耗也日益增加。中国自进入改革开放的快车道以后随着工业的大发展成为了世界第一制造业大国。但是不得不承认成为世界第一工业大国是付出了巨大代价的。雾霾、沙尘暴、水污染、土壤污染、大气污染等一系列重大污染屡屡发生。尤其在对于当前社会最为重要的水资源污染是当今我们急需要解决的。
1.1中国目前水资源现状
中国作为世界上土地面积第三大的国家但是却拥有世界第一多的人口。虽说中国拥有丰富的自然资源但是人均占有量却远低于世界人均水平。虽说我国水资源占全球6%。但是人均却只有2300立方米，并且在刨除无法使用的洪水和偏远地区的地下水之后人均可用的仅为900立方米左右。中国是水资源最少的并且也是全球13个水资源最少的国家和地区之一。
1.2我国污水处理现状
自从2003年以后中国进入发展的快车道以后，水污染也越发严重起来。随着多起由水资源污染而引起的重大污染事件之后国家和有关部门便开始关注和重视水污染和因为水污染而带来的附加污染。目前对于水污染的处理一般采用三级处理方法。一级采用物理处理方法主要是去除污水中较大的物质和部分有毒物质。二级采用生物处理方法和化学处理方法主要去除可降解的有机物和部分污染物。
三级是进一步去除二级所不能够去除的如病原体，大分子有机物等。
1.3我国水资源的未来发展
目前世界上采用比较多的就是膜法水处理技术。目前我国水处理站采用的大多是美国通用公司的膜法水处理技术。目前膜法主要有微滤、超滤等处理技术，其中微滤是目前发展的主要方向，因为微滤有着出水品质高，含有杂质少等优秀特点。并且凭借这项技术污水利用率提高到百分之八十。作为未来发展的主要方向膜法水处理技术将会是未来在水资源重复中使用最多作用最大的技术。
本文的主要结构如下：
引言：介绍了本课题的意义
第一章：介绍了当前我国的水资源概况，水处理技术现状和主要采取的什么技术。














2 PLC介绍
2.1 PLC的产生
在二十世纪六十年代为了替代容易损坏的继电器，一种简单方便耐用的可用于顺序控制的并且拥有计算机设计思维的可编程控制器应运产生。但是此时的PLC只能进行逻辑运算。
2.2 PLC的组成
CPU：CPU芯片是PLC心脏。是所有动作的参与者和实施者。目前各个公司的PLC的CPU都不同，目前主流的CPU是八位和十六位。
存储器：（1）用于存储各种通信数据
        （2）用于存储用户执行程序
        （3）用于存储系统程序
I/O电路：I/O电路是连接PLC外部控制量和自身的通信电路，主要用于数据传输和通信控制。
电源模块：电源模块主要为PLC提供电源，目前主流的输入电压交流有110V、220V。主流输入直流电压有12V、24V、48V。而电源模块为CPU等重要系统则提供直流5V、24V的工作电源。
通信模块：现在主流的PLC的CPU模块上一般有一个RS-232或RS-45的通信口，通过此通信口PLC可以与上位计算机直接进行通信。并且拥有了通信模块后PLC则可以组成分散的控制系统。
特殊功能单元：拥有此单元一般为执行特定的任务。如PID单元、位置控制单元等，一般来说这些单元越多则PLC的功能越强大。
编程器：编程器是用户在计算机上编写PLC的用户程序并且通过通信模块传入PLC的存储器中的重要外部设备。随着技术发展编程器价格已经很低了，目前基本上所有的PLC都配备了编程器以方便用户使用。
2.2 PLC的特点和用途
2.2.1可编程控制器拥有以下特点：
第一，可靠性好，由于采用了光电隔离等保护技术，使得PLC可以在恶劣的工业环境中稳定使用。
第二，功能完善，PLC所拥有的各种模块，各种强大的指令使得PLC可以完全几乎所有的工业任务。
第三，编程简单，由于采用梯形图的编程语言，使得使用PLC变得简单易学。
第四，在线编程，由于编程器的存在使得我们使用手提电脑等随身携带的设备便可以对PLC进行编程控制。
第五，安装容易，由于采用模块化，使得PLC易于安装使用。
第六，体积小、重量轻、功耗低，随着技术发展大规模集成电路的使用PLC的体积越来越小，重量也越来越轻，但是功耗却越来越低。
2.2.2 PLC的主要用途：
第一，取代继电器，在自动化仓库、生产流水线等方面逻辑控制。
第二，过程控制，在温度、水位、压力、湿度、流量等变量进行控制。
第三，位置，速度控制，在机床，电机调速上进行控制。
第四，数据监控，在化工、电力、水利、钢铁等领域进行数据采集和监控。
第五，组成分散控制系统，与上位机或下位机组成分散控制系统。
2.3 PLC的发展方向
第一，小型、微型化，由于超大规模集成电路的发展，未来PLC也将迈向越来越小的方向发展。
第二，大型、超大型化，其中PLC的另外一个发展方向就是使其拥有成千上万的输入、输出量，运用在冶金、化工等领域中。
第三，智能化，目前随着人工智能技术的发展，未来使得PLC拥有人工智能技术是一个重点发展方向。
第四，CPU能力更强，随着半导体材料，工艺的提升未来的PLC的CUP的运算能力和速度将会越来越强。
第五，支持更多的工业总线，随着多线程技术的发展未来的PLC将会拥有更强的多线程支持技术。
第六，编程软件标准化，目前全球还没有统一的PLC软件编程代码格式，但是随着社会的发展必定会有一种实用的统一的编程语言。
第七，人机交流功能增强，要加强人机交互技术的使用，用更亲近的人机交互系统。
第八，数据处理能力大幅增加，由于各项技术的同步发展，是的PLC的处理能力大幅增加。
2.4 PLC的主要技术指标
第一，用户存储体量，在可编程控制器中只有用户可执行的存储容量越大，可编程控制器能执行的程序越多且越可能实现智能化。
第二，输入和输出点数是可编程控制器能够接收和输出的模拟数据量之和。
第三，扫描速度，A/D转换和D/A转换速率是指单位时间内扫描完1K字节所需要的时间，只有当时间越短时可编程控制器的性能也越好。
第四，指令的多少和功能，当可编程控制器拥有的指令越多那么可以完成的工作约多越复杂，且当拥有众多的指令集之后使得编程变得更加简单和易于实现。
第五，内部寄存器性能和容量，可编程控制器在执行程序时需要很多的寄存器来暂时存储需要处理的数据，各种指令，各种标志，各种模块信息等。只有拥有了足够多的寄存器之后才能够使可编程控制器的运行速度变快。
第六，特殊功能单元，当特殊功能越多时，可编程控制器能够实现的功能种类也越多，如各种校正装置、模糊控制等。
第七，可拓展性，由于技术的飞速发展可编程控制器在设计制造时必须留有一定的余量，使得今后在改造之后能够继续使用。
2.5PLC的工作原理
第一个阶段：输入（刷新）阶段，此阶段是通过用扫描的方式将需要处理的所有信号依次读入，且通过内部寄存器进行暂存。
第二个阶段：程序执行阶段，此阶段是将读入的程序按先后顺序将指令依次执行，然后通过内部寄存器将每条执行后的程序指令送入暂存区的印象系统，等到所以指令集全部执行完成后。然后全部输出此时可编程控制器重复步骤一过程。
第三个阶段，输出阶段，当执行完程序后通过暂存区将所以输出信后变控制信号分别作用于不用的实体物件如接触器、电磁继电器、指示灯等表示输出程序结果。
2.6本次实验所采用的的PLC
对于在本次设计中的PLC我们需要遵循以下标准选择。
第一：拥有足够完成本次设计能力的PLC。
第二：拥有足够快的速度以实现与组态王之间的信息传输。
第三：在满足以上要求后PLC结构应该足够小且方便携带、安装。
目前世界上主流的几个PLC制造厂商分别是日本的欧姆龙、三菱，德国的西门子，瑞士的ABB等。本次设计中将选择西门子的PLC作为本次设计的PLC实现对象。其中能够满足以上要求的PLC共有两个型号分别为S7-200系列和S7-300系列。其中S7-200系列为小型PLC系统，而S7-300系列为中型PLC系统。
表2.1 s7-300PLC的性能参数
输入输出	主机不支持
输入输出映像（可扩展）	可扩展1024输入、1024输出
硬件扩展	最多3台扩展模块
过程映像	输入128B、输出128B
数字量通道	输入266-7856、输出262-7904、集中输入266-1008、集中输出262-1008
模拟量通道	输入64-494、输出64-495、集中输入64-253、集中输出64-250
CPU处理速度	位 0.01us-0.05us
程序存储器	32k
数据存储器	32k（可通过MMC扩展为8MB）
定时器	256
温度模块	16位分辨率
网络扩展	串行通讯、MPI、Profibus-DP主站/从站
通讯速率	PPI/MPI：187.5kbps、自由口：115.2kbps、Profibus-DP：12Mbps
工作电压	需要专用的电源模块
表2.2 s7-200PLC的性能参数
输入输出	数字输入6-24、数字输出4-16、模拟输入16-32、模拟输出8-28
输入输出映像（可扩展）	可扩展128输入、128输出
硬件扩展	最多7台扩展模块
中断输入	4
脉冲	2（20K-100K）
CPU特性	8个PID控制器、最多2个串行端口、实时时钟、浮点运算、状态LED指示
CPU处理时间	位处理 0.22us
程序存储器	4-25k
数据存储器	2-10k
定时器	256
温度模块	16位分辨率
网络扩展	串行通信、AS-interface、MPI、Profibus-DP从站、Modbus主站/从站
通过以上性能的对比，以及对本次设计所需要达到的功能来考量，综合对比本次课程设计选择西门子S7-300系列，具体型号为S7-314。
2.7 PLC程序设计
PLC在程序设计前通过列出I/O表能够准确清楚的知道所需要实现的功能以及在PLC后续的编程中能够简化PLC编程使它更加明了简单。
本次编程采用西门子 STEP 7-Micro/WIN编程软件以下为编程界面。
图2.1PLC编程软件





表 2.3 I/O地址分配表
	名    称	地    址
1	一套净化启动	I0.0
2	一套反冲启动	I0.1
3	二套净化启动	I0.2
4	二套反冲启动	I0.3
5	报警解除按钮	I0.4
6	热继电器FR1	I0.5
7	热继电器FR2	I0.6
8	热继电器FR3	I0.7
9	一套停止	I1.0
10	二套停止	I1.1
12	YV1	Q0.0
13	YV2	Q0.1
14	YV3	Q0.2
15	YV4	Q0.3
16	YV5	Q0.4
17	YV6	Q0.5
18	YV7	Q0.6
19	YV8	Q0.7
20	YV9	Q1.0
21	YV10	Q2.1
22	YV11	Q2.2
23	YV12	Q2.4
24	KM1	Q3.0
25	KM2	Q3.1
26	HL1	Q3.4
27	HL2	Q3.5
28	HL3	Q3.6
29	声音报警	Q3.7
30	PIT1	AIW2
31	PIT2	AIW4
32	PIT3	AIW10
33	PIT4	AIW12
34	FIT1	AIW16
35	FIT2	AIW18
36	FIT3	AIW20
37	FIT4	AIW8
38	FIT5	AIW30
部分梯形图
图2.2 部分梯形图







3 管式膜

3.1膜技术的基本概况
随着社会进步科技的发展人类已经能够做出与某些动植物相似的拥有分离某种物质的各种膜。其中主要结构有对称膜和非对称膜。还有依化学方面来分可以分为有机膜和无机膜。其中利用膜的半透性以达到我们所需要的分离半透膜离子，混合物等。
3.2 膜的结构与分类
膜不仅仅可以是固态也可以是液态更可以是气态，甚至在未来发展也可能发展出离子态以及其它态的膜。按照普通的分法膜一般拥有以下几种结构。
第一种按分离机理分：有反应膜，渗透膜等。
第二种按结构分：有管型，平板型，螺旋形等。
第三种孔的大小分：有微滤，超滤，相反渗透膜等。
还有其他各种分类如下图所示










图3.1 膜的分类




3.2 膜组件的选择
在膜的实际运用中我们通常是将膜固定到一个容器中来组成一个单元的膜系统分支这种形式称之为膜组件。目前比较常用的膜组件有旋转流式，平框式，毛细管式等。其中膜组件又主要使用微滤和超滤这两种过滤方式。
超滤：超滤膜通常为不对称结构，其中一侧膜较薄另一侧作为支撑较厚。通常超滤膜能够透过小分子溶液，并且能够截留超过20nm的大分子溶质。判定超滤膜性能的是渗透通量和截留率。
图3.1 膜组件

微滤：微滤膜与常规粗滤膜在工作方式上大体相同，但是微滤膜因为拥有了相对于超滤膜更多更整齐且更小的过滤孔使得微滤膜能够分离出更小的溶质。微滤膜能够过滤气体、液体，截留0.05-10um的粒子，工作压力在0.7-7kpa。微滤是目前全球使用最多的一种膜类型。并且微滤膜也是目前销售总价最高的膜。一般用微滤膜在工业上或是医药行业中将0.1um溶质与液体分开，以达到半透膜的半透性。

图3.2 管式膜示意图

由于管式膜的结构简单，出水利用率高。因此本设计选择管式膜。
本章小结：随着膜技术的发展各种功能的膜逐渐被开发出来，其中膜微滤技术是使用最多的一种技术。并且相信随着技术发展膜的渗透率会越来越高，能够半透的物质也会越来越多。



4 组态控制与实现
4.1 组态介绍
组态（Configure）在英文中的含义是“配置”“设定”“设置”等。是通过用户将自己所需要实现的功能通过组态软件将自己所需要的功能逐个搭建起来所形成的属于特定功能的一套不用另外编程的软件。实际简单来说组态软件就是对各种自动化装备进行控制和监视。并且因为拥有丰富的图形交互界面能够将采集到的数据通过图像表达给设计人员让设计人员能够清晰的对某些重要信息进行采集和处理并且发送控制命令控制系统。
    目前能够实现硬件通信与软件通信并且实现可视化的软件就是各种组态软件。目前主流的组态软件有国外的万维公司的InTouch、西门子的Wincc、意大利自动化软件供应商的Movicon等，国内有世纪星、三维力控、组态王、紫金桥、MCGS等。组态王作为国产组态软件凭借良好的人机交互界面，并且优秀的通信连接还有各种接近真实的模拟数据。能够达到对所设计的控制、通信、交互的真实性，因此组态王长期占据国产组态软件的第一名。由于组态王的优秀并且作为国产软件对国产设备的兼容性更好，因此本次设计采用国产组态王软件。
4.2组态王介绍
组态王是北京亚控科技所研发的自动化控制系统。组态王拥有可视化人机交互界面，I/O点的自动获取与建立，并拥有分布的存储系统用于分布式存储报警和历史数据，再异常情况下也可恢复数据，并且组态王拥有极强的设备集成能力，能够连接目前市面上的几乎所有设备和系统。以上就是组态王相较于其他组态软件拥有的最耀眼的亮点。
组态王的核心功能如下表
表4.1 组态王核心功能
1	流程图监控功能
2	完整的脚本编辑功能
3	实时趋势监控功能
4	全面报警功能
5	历史数据管理功能
6	报表展示功能
7	历史数据查询功能
8	历史趋势图纸

4.3组态王的使用方法
首先启动软件打开软件之后的界面是这样的。

图4.1 组态王启动界面



 
界面启动之后我们可以选择新建项目然后为自己的项目设定一个单独的名字，首先我们可以先看看demo样片，样片如下图。

图4.2 demo样片


然后我们可以通过可视化界面来看看现在正在运行的demo样片的图片情况，并且也可以观看各种数据的运行处理情况。
图4.3 demo可视化界面


图4.4 demo历史趋势图















图4.5  demo温控曲线


图4.6 demo数据显示















图4.7 demo报表
 
以上就是组态王显示的样片所以的可视化界面，通过如此强大的人机交互界面我们能够清晰地知道当前设备运行情况，数据输入、输出情况，以及可以轻松看见控制系统的当前情况。

5综合设计
本次设计的题目是基于PLC的旋转流管式膜微滤电气控制系统。主要系统是一套膜微滤处理水系统，该系统是通过两套独立的污水净化装置构成。且两套系统不能够同时工作其中一套在工作是另外一套不能处于工作状态，一般处于备用和反冲状态。下图是膜微滤系统的示意图。
图5.1 膜微滤处理水流程示意图

通过以上流程图可以清楚地知道当启动第一套净水系统通过接触器KM1接通控制加压泵（M1）启动工作，与此同时YV1、YV2、YV3、YV4通过电磁阀启动工作。此时第一套净水装置开始工作
